# Task 20260201-1400-frst-sam3-script

## Summary
- Create a script that combines FRST center detection with SAM3 segmentation prompts for tiny bubbles.

## Owner
- codex/20260201-1400

## Status
- done

## Plan
- [ ] Inspect tests/classical_test.py and tests/bubble_sam3 pipeline.
- [ ] Identify reusable utilities for FRST center detection and SAM3 prompting.
- [ ] Implement combined script and ensure overlay output with distinct colors.
- [ ] Note usage or CLI options if present in existing scripts.

## Log
- 2026-02-01 14:00 EST: Task created.
- 2026-02-01 14:05 EST: Added combined FRST+SAM3 script `bubbly_flows/tests/bubble_frst_sam3_mask.py` with overlay output and PCS prompt support.
- 2026-02-01 14:12 EST: Added missing CLI flags to match apply_cli_overrides; expanded docstring usage/flags; added cutout support.
- 2026-02-01 14:25 EST: Adjusted script to output FRST+micro prompt masks, big-prompt masks, and consolidated combined output; added separate prompts and output path derivation.
- 2026-02-01 14:31 EST: Removed duplicate argparse flags that caused conflicts.
- 2026-02-01 14:38 EST: Added tiled point-prompt pass (tile_size=8*r_max, overlap=2.5*r_max) with large-mask filtering and logging; consolidated tile+big outputs.
- 2026-02-01 14:55 EST: Added per-object negative point prompting support (kNN neighbors + hex ring) via new SAM3 backend helper and updated tiled FRST pass to use it.
